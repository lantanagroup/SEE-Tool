<div id="Div2">
    <form>
        <div id="narrativeAccordion" class="accordian">
            <div class="accordianGroup">
                <div class="accordian-heading">
                    <div class="alert alert-info">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#narrativeAccordion" href="#collapseOne"><h3>Narrative</h3></a>
                    </div>
                </div>
                <div id="collapseOne" class="accordion-body collapse in">
                    <div class="row-fluid">
                        <div class="span6 well well-small">
                            <h4>Free Text Narrative:</h4>
                            <div id="Div3" style="width: 100%" data-bind="tinymce: Entity().FreeNarrative"></div>
                        </div>
                        <div id="Div4" class="span6 well well-small">
                            <label data-bind="html: Entity().GeneratedNarrative" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="alert alert-info">
            <h3>Procedures</h3>
        </div>

        <div class="row-fluid">
            <div class="well">
                <h4>Procedure Orders <button class="btn btn-small btn-primary" data-bind="click: DoAddProcedure">Add</button></h4>

                <table class="table table-striped table-bordered table-condensed">
                    <thead>
                        <tr>
                            <th style="vertical-align: top">Name</th>
                            <th style="vertical-align: top">Orderer</th>
                            <th style="vertical-align: top">Amount</th>
                            <th style="vertical-align: top">Frequency</th>
                            <th style="vertical-align: top">Duration</th>
                            <th style="vertical-align: top">Outcome</th>
                            <th style="vertical-align: top">Start/Chg Date</th>
                        </tr>
                    </thead>
                    <tbody class="procedureOrders" data-bind="foreach: Entity().ProcedureOrders">
                        <tr>
                            <td><a href="#" class="author-info" data-toggle="tooltip" data-placement="top" data-bind="attr: { title: SEE.util.displayAuthorToolTip(Author, true)}"><span data-bind="text: Name,click: function() { $parent.DoEditProcedure($data); } " /></a></td>
                            <td><div data-bind="template: { name: '../view/shared/PersonInfo.Template.html', data: { personInfo: Orderer(), title: 'Edit person who ordered this procedure' } }" /></td>
                            <td><span data-bind="text: Amount, attr: { title: SEE.util.displayAuthorToolTip(Author, true) }" class="author-info" /></td>
                            <td><span data-bind="text: Frequency, attr: { title: SEE.util.displayAuthorToolTip(Author, true) }" class="author-info" /></td>
                            <td><span data-bind="text: Duration, attr: { title: SEE.util.displayAuthorToolTip(Author, true) }" class="author-info" /></td>
                            <td><span data-bind="text: Outcome, attr: { title: SEE.util.displayAuthorToolTip(Author, true) }" class="author-info" /></td>
                            <td><span data-bind="dateAsString: StartChangeDate, attr: { title: SEE.util.displayAuthorToolTip(Author, true) }" class="author-info" /></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="well">
            <h4>Common Treatments</h4>

            <table class="table table-striped">
                <tbody>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Common', code: '1', label: 'Suction' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Common', code: '2', label: 'Vascular Access (central line)' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Common', code: '3', label: 'Urinary Catheter' } }" /></td></tr>
                </tbody>
            </table>
        </div>

        <div class="well">
            <h4>Specialized Treatments</h4>

            <table class="table table-striped">
                <tbody>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Specialized', code: '4', label: 'Dialysis' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Specialized', code: '5', label: 'Chemotherapy' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Specialized', code: '6', label: 'Radiation Therapy' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Specialized', code: '7', label: 'Total Parenteral Nutrition' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Specialized', code: '8', label: 'Tracheostomy Care' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Specialized', code: '9', label: 'Ventilatory Management' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Specialized', code: '10', label: 'Fluid Restriction' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Specialized', code: '11', label: 'Glucose Monitoring' } }" /></td></tr>
                </tbody>
            </table>
        </div>

        <div class="well">
            <h4>Other Treatments</h4>

            <table class="table table-striped">
                <tbody>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Other', code: '12', label: 'Setting Decision/Change' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Other', code: '13', label: 'Nutritional Supports' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Other', code: '14', label: 'Lifestyle Modifications' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Other', code: '15', label: 'Personal Supportive Services' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Other', code: '16', label: 'Restorative Services' } }" /></td></tr>
                <tr><td><div class="treatment row-fluid" data-bind="template: { name: '../view/document/section/ProcedureSection.TreatmentTemplates.html', data: { listName: 'Other', code: '17', label: 'Health Maintenance/Disease Management Tests/Procedures' } }" /></td></tr>
                </tbody>
            </table>
        </div>
    </form>
</div>

<div id="ProcedureModal" class="modal hide fade modal-big" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" data-bind="click: DoCancelModal">×</button>
        <h3 id="ModalLabel">Edit Procedure</h3>
    </div>
    <div class="modal-body" data-bind="with: NewProcedureOrder">
        <form>
            <div>

                <fieldset>
                    <legend>Procedure</legend>

                    <!-- ko if: Name() == null || Name() == '' -->
                    <div class="alert alert-error">The Procedure Name is required.</div>
                    <!-- /ko -->

                    <div class="control-group" data-bind="css:{error: Name() == null || Name() == ''}">
                        <div class="controls">
                            <label for="name" data-bind="css:{ 'text-error': Name() == null || Name() == ''}">Name *</label>
                            <input type="text" placeholder="Procedure Name" id="name" data-bind="value: Name, valueUpdate:'afterkeydown'" class="input-xlarge"/>
                        </div>
                    </div>

                    <div class="control-group">
                        <label >Amount</label>
                        <input class="span6" type="text" class="input-small" data-bind="value: Amount" />
                    </div>
                    <div class="control-group">
                        <label >Frequency</label>
                        <input class="span6" type="text" class="input-small" data-bind="value: Frequency" />
                    </div>
                    <div class="control-group">
                        <label >Duration</label>
                        <input class="span6" type="text" class="input-small" data-bind="value: Duration" />
                    </div>
                    <div class="control-group">
                        <label >Outcome</label>
                        <input class="span6" type="text" class="input-small" data-bind="value: Outcome" />
                    </div>
                    <div>
                        <label for="datePicker">Start/Change Date</label>
                        <div class="input-prepend input-append">
                            <span class="add-on"><i class="icon-calendar calendar-image" data-bind="click: function(){ $('#datePicker').datepicker('show') }"></i></span>
                            <input type="text" data-bind="datepicker: StartChangeDate, datepickerOptions: {maxDate: '0', dateFormat: 'mm/dd/yy', changeYear: true, changeMonth: true}" id="datePicker" class="datePickerInput" />
                            <span class="add-on" data-bind="click: function() { StartChangeDate(new Date())}">Today</span>
                        </div>
                    </div>
                </fieldset>
            </div>
        </form>
    </div>
    <div class="modal-footer" data-bind="with: NewProcedureOrder">
        <!-- ko if: !$parent.SelectedProcedureIsNew() -->
        <button class="btn pull-left" data-bind="click: $parent.DoRemoveProcedure">Remove</button>
        <!-- /ko -->

        <button class="btn" aria-hidden="true" data-bind="click: $parent.DoCancelModal">Cancel</button>
        <button class="btn btn-primary" data-bind="click: $parent.DoSaveProcedure, disable: Name() == '' || Name() == null">Save changes</button>

    </div>
</div>





